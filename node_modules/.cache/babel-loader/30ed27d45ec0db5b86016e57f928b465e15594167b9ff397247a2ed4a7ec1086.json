{"ast":null,"code":"import _regeneratorRuntime from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Outlet,useNavigate}from'react-router-dom';import{AppContext}from'./context/context';import localforage from'localforage';import{AuthProvider,useAuth}from'./context/auth';import'./App.css';import NavBar from'./components/NavBar/NavBar';import Footer from'./components/Footer/Footer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),characters=_useState2[0],setCharacters=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var navigate=useNavigate();var auth=useAuth();localforage.getItem('user').then(function(resp){return console.log('user:',resp);});// Get character by ID\nvar getCharacter=function getCharacter(id){return fetch(\"https://rickandmortyapi.com/api/character/\".concat(id)).then(function(resp){return resp.json();}).then(function(data){return data;});};// Update all characters\nvar updateCharacters=function updateCharacters(data){return setCharacters(data);};// Delete character\nvar deleteCharacter=function deleteCharacter(id){var arr=characters.filter(function(e){return e.id!==id;});document.getElementById(\"character-\".concat(id)).classList.add('-translate-y-[30px]','opacity-0','pointer-events-none');setTimeout(function(){return setCharacters(arr);},510);};var addRandomCharacter=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var id,chars,char;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:navigate('/');setLoading(true);id=Math.floor(Math.random()*(Math.floor(1)-Math.ceil(826)+1)+Math.ceil(826));chars=_toConsumableArray(characters);// Check for existent character\nif(!chars.find(function(e){return e.id===id;})){_context.next=7;break;}addRandomCharacter();return _context.abrupt(\"return\");case 7:_context.next=9;return getCharacter(id);case 9:char=_context.sent;chars.unshift(char);setLoading(false);setCharacters(chars);case 13:case\"end\":return _context.stop();}}},_callee);}));return function addRandomCharacter(){return _ref.apply(this,arguments);};}();var handleLoading=function handleLoading(status){return setLoading(status);};var clearAll=function clearAll(){navigate('/');setCharacters([]);};var addCharacter=function addCharacter(el){var chars=_toConsumableArray(characters);// Check for existent character\nif(chars.find(function(e){return e.id===el.id;}))return;chars.unshift(el);setCharacters(chars);};var isLoggedIn=function isLoggedIn(){console.log('user',auth.user);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(AppContext.Provider,{value:{characters:characters,addCharacter:addCharacter,updateCharacters:updateCharacters,deleteCharacter:deleteCharacter,addRandomCharacter:addRandomCharacter,loading:loading,handleLoading:handleLoading,clearAll:clearAll},children:/*#__PURE__*/_jsxs(\"main\",{id:\"mainWrapper\",children:[/*#__PURE__*/_jsx(NavBar,{path:\"/\"}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Footer,{})]})})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Outlet","useNavigate","AppContext","localforage","AuthProvider","useAuth","NavBar","Footer","App","characters","setCharacters","loading","setLoading","navigate","auth","getItem","then","resp","console","log","getCharacter","id","fetch","json","data","updateCharacters","deleteCharacter","arr","filter","e","document","getElementById","classList","add","setTimeout","addRandomCharacter","Math","floor","random","ceil","chars","find","char","unshift","handleLoading","status","clearAll","addCharacter","el","isLoggedIn","user"],"sources":["/Users/fitodac/Sites/henry/rick-and-morty/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Outlet, useNavigate } from 'react-router-dom'\nimport { AppContext } from './context/context'\nimport localforage from 'localforage'\n\nimport { \n\tAuthProvider, \n\tuseAuth \n} from './context/auth'\n\nimport './App.css'\n\nimport NavBar from './components/NavBar/NavBar'\nimport Footer from './components/Footer/Footer'\n\n\nfunction App() {\n  \n\tconst [ characters, setCharacters ] = useState([])\n\tconst [ loading, setLoading ] = useState(false)\n  const navigate = useNavigate()\n\tconst auth = useAuth()\n\n\tlocalforage.getItem('user')\n\t.then(resp => console.log('user:', resp))\n\t\n\n\t// Get character by ID\n\tconst getCharacter = id => {\n\t\treturn fetch(`https://rickandmortyapi.com/api/character/${id}`)\n\t\t\t.then(resp => resp.json())\n\t\t\t.then(data => data)\n\t}\n\n\t// Update all characters\n\tconst updateCharacters = data => setCharacters(data)\n\n\n\t// Delete character\n\tconst deleteCharacter = id => {\n\t\tconst arr = characters.filter(e => e.id !== id)\n\t\tdocument.getElementById(`character-${id}`).classList.add('-translate-y-[30px]', 'opacity-0', 'pointer-events-none')\n\t\tsetTimeout(() => setCharacters(arr), 510)\n\t}\n\n\tconst addRandomCharacter = async () => {\n\t\tnavigate('/')\n\t\tsetLoading(true)\n\t\tconst id = Math.floor(Math.random() * (Math.floor(1) - Math.ceil(826) + 1) + Math.ceil(826))\n\t\tconst chars = [...characters]\n\t\t\n\t\t// Check for existent character\n\t\tif( chars.find( e => e.id === id ) ){\n\t\t\taddRandomCharacter()\n\t\t\treturn\n\t\t}\n\t\t\n\t\tconst char = await getCharacter(id)\n\t\tchars.unshift(char)\n\t\tsetLoading(false)\n\t\tsetCharacters(chars)\n\t}\n\n\tconst handleLoading = status => setLoading(status)\n\n\tconst clearAll = () => {\n\t\tnavigate('/')\n\t\tsetCharacters([])\n\t}\n\n\tconst addCharacter = el => {\n\t\tconst chars = [...characters]\n\n\t\t// Check for existent character\n\t\tif( chars.find( e => e.id === el.id ) ) return\n\n\t\tchars.unshift(el)\n\t\tsetCharacters(chars)\n\t}\n\n\t\n\tconst isLoggedIn = () => {\n\t\tconsole.log('user', auth.user)\n\t}\n\n\n\n  return (\n    <>\n\t\t\t<AuthProvider>\n\t\t\t\t<AppContext.Provider \n\t\t\t\t\tvalue={{\n\t\t\t\t\t\tcharacters,\n\t\t\t\t\t\taddCharacter,\n\t\t\t\t\t\tupdateCharacters,\n\t\t\t\t\t\tdeleteCharacter,\n\t\t\t\t\t\taddRandomCharacter,\n\t\t\t\t\t\tloading,\n\t\t\t\t\t\thandleLoading,\n\t\t\t\t\t\tclearAll\n\t\t\t\t\t}}>\n\t\t\t\t\t<main id=\"mainWrapper\">\n\t\t\t\t\t\t<NavBar path=\"/\" />\n\t\t\t\t\t\t<Outlet/>\n\t\t\t\t\t\t<Footer />\n\t\t\t\t\t</main>\n\t\t\t\t</AppContext.Provider>\n\t\t\t</AuthProvider>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}