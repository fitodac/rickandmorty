{"ast":null,"code":"import _defineProperty from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/fitodac/Sites/henry/rick-and-morty/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{validate}from'./validate';import localforage from'localforage';import{useNavigate}from'react-router-dom';import css from'./Form.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var form_model={user:'',password:''};export default(function(Form){var navigate=useNavigate();var _useState=useState({user:'rick@rickandmortyapp.com',password:'S0!henry'}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),display_errors=_useState6[0],setDisplayErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),access_denied=_useState8[0],setAccessDenied=_useState8[1];var allowed_user=process.env.REACT_APP_USER;var allowed_pwd=process.env.REACT_APP_PASSWORD;var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));setErrors(validate(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value))));};var clearErrors=function clearErrors(){setDisplayErrors(false);setAccessDenied(false);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(Object.values(errors).length===0){var user=form.user,password=form.password;if(user===allowed_user&&password===allowed_pwd){localforage.setItem('user',form.user).then(function(){setForm(_objectSpread({},form_model));setErrors({});navigate('/');});}else{setAccessDenied(true);}}else{setDisplayErrors(true);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"w-full grid gap-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:css.fieldset,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:css.field,placeholder:\"Usuario\",name:\"user\",value:form.user,onChange:handleChange,onKeyUp:clearErrors}),display_errors&&/*#__PURE__*/_jsx(\"p\",{className:css.errors,children:errors.user})]}),/*#__PURE__*/_jsxs(\"div\",{className:css.fieldset,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.password,className:css.field,placeholder:\"Contrase\\xF1a\",name:\"password\",onChange:handleChange,onKeyUp:clearErrors}),display_errors&&/*#__PURE__*/_jsx(\"p\",{className:css.errors,children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{className:css.btn,children:\"Entrar\"})]}),access_denied&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\",children:\"El usuario o la contrase\\xF1a no son correctos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-white pt-10 grid\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Usuario: rick@rickandmortyapp.com\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Contrase\\xF1a: S0!henry\"})]})]})});});","map":{"version":3,"names":["useState","validate","localforage","useNavigate","css","form_model","user","password","Form","navigate","form","setForm","errors","setErrors","display_errors","setDisplayErrors","access_denied","setAccessDenied","allowed_user","process","env","REACT_APP_USER","allowed_pwd","REACT_APP_PASSWORD","handleChange","e","target","name","value","clearErrors","handleSubmit","preventDefault","Object","values","length","setItem","then","fieldset","field","btn"],"sources":["/Users/fitodac/Sites/henry/rick-and-morty/src/components/Form/Form.jsx"],"sourcesContent":["import { useState } from 'react'\nimport { validate } from './validate'\nimport localforage from 'localforage'\nimport { useNavigate } from 'react-router-dom'\n\nimport css from './Form.module.css'\n\n\nconst form_model = { user: '', password: '' }\n\n\nexport default Form => {\n\tconst navigate = useNavigate()\n\n\tconst [form, setForm] = useState({ user: 'rick@rickandmortyapp.com', password: 'S0!henry' })\n\tconst [errors, setErrors] = useState({})\n\tconst [display_errors, setDisplayErrors] = useState(false)\n\tconst [access_denied, setAccessDenied] = useState(false)\n\tconst allowed_user = process.env.REACT_APP_USER\n  const allowed_pwd = process.env.REACT_APP_PASSWORD\n\n\t\n\tconst handleChange = e => {\n\t\tsetForm({...form, [e.target.name]: e.target.value })\n\t\tsetErrors(validate({...form, [e.target.name]: e.target.value }))\n\t}\n\n\n\tconst clearErrors = () => {\n\t\tsetDisplayErrors(false)\n\t\tsetAccessDenied(false)\n\t}\n\n\t\n\tconst handleSubmit = e => {\n\t\te.preventDefault()\n\n\t\tif( Object.values(errors).length === 0 ){\n\t\t\tconst { user, password } = form\n\t\t\t\n\t\t\tif( user === allowed_user && password === allowed_pwd ){\n\t\t\t\t\n\t\t\t\tlocalforage.setItem('user', form.user)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tsetForm({...form_model})\n\t\t\t\t\t\tsetErrors({})\n\t\t\t\t\t\tnavigate('/')\n\t\t\t\t\t})\n\n\t\t\t}else{\n\n\t\t\t\tsetAccessDenied(true)\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tsetDisplayErrors(true)\n\t\t}\n\t}\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"w-full max-w-xs px-6 pt-32 mx-auto xl:px-0\">\n\t\t\t\t<form \n\t\t\t\t\tonSubmit={ handleSubmit } \n\t\t\t\t\tclassName=\"w-full grid gap-y-4\">\n\t\t\t\t\t\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Usuario\"\n\t\t\t\t\t\t\tname=\"user\"\n\t\t\t\t\t\t\tvalue={ form.user }\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.user}</p> ) }\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={ css.fieldset }>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tvalue={ form.password }\n\t\t\t\t\t\t\tclassName={ css.field }\n\t\t\t\t\t\t\tplaceholder=\"Contraseña\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tonChange={ handleChange }\n\t\t\t\t\t\t\tonKeyUp={ clearErrors }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ display_errors && ( <p className={ css.errors }>{errors.password}</p> ) }\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<button className={ css.btn }>\n\t\t\t\t\t\tEntrar\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\n\t\t\t\t{access_denied && (\n\t\t\t\t\t<div className=\"bg-red-700 text-white text-sm leading-none py-2 px-5 mt-5 rounded-xl\">\n\t\t\t\t\t\tEl usuario o la contraseña no son correctos\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"text-white pt-10 grid\">\n\t\t\t\t\t<div>Usuario: rick@rickandmortyapp.com</div>\n\t\t\t\t\t<div>Contraseña: S0!henry</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}